<!DOCTYPE html>
<html lang="en">
   <head>
      <title>jnote</title>
<meta charset="utf-8">
<link id="css" rel="stylesheet" href="/styles.css">
      <meta name="author" content="james">
      <meta name="viewport" content="width=device-width, initial-scale=1.0">
      <meta name="description" content="jnote demo and installation">
      <meta data-react-helmet="true" name="theme-color" content="#26ccff">
      <meta content="/icon.png" name="twitter:image">
      <meta content="/icon.png" property="og:image">
      <meta content="/icon.png" property="og:image:secure_url">
 <link rel="manifest" href="manifest.webmanifest">
   </head>
   <body>
      <ul>
         <li><a class="active" id="btnSave" title="Save">󰆓</a></li>
         <li><a onclick="document.querySelector(&quot;textarea&quot;).value = &quot;&quot;" title="Clear">󰃢</a></li>
         <li><a onclick="toggleSpellCheck()" title="Toggle Spellcheck">󰓆</a></li>
         <li><label class="custom-file-input" for="file" title="Select File">󰩎</label><input type="file" id="file"/></li>
         <li><a onclick="copyToClipboard()" title="Copy To Clipboard">󰅌</a></li>
      </ul>
      <textarea id="text" style="height:1em;" spellcheck="true"></textarea>
<script>
if ('serviceWorker' in navigator) {
  window.addEventListener('load', () => {
    navigator.serviceWorker.register('/sw.js')
      .then(reg => {
        console.log('yay', reg)
      }).catch(err => {
        console.log('gosh darn it!')
      })
  })
}
const downloadToFile = (content, filename, contentType) => {
  const a = document.createElement("a")
  const file = new Blob([content], { type: contentType })

  a.href = URL.createObjectURL(file)
  a.download = filename
  a.click()

  URL.revokeObjectURL(a.href)
}
document.querySelector("#btnSave").addEventListener("click", () => {
  const textArea = document.querySelector("textarea")

  downloadToFile(textArea.value, "note.txt", "text/plain")
})
var observe = function (element, event, handler) {
    element.addEventListener(event, handler, false)
}
var text = document.getElementById("text")
  text.style.height = "auto"
  text.style.height = Math.max(text.scrollHeight, window.innerHeight - 60)+"px"
if (window.localStorage) {
  const input = document.getElementById("text")
  input.value = localStorage.value || ""
  input.addEventListener("input", function () {
    localStorage.setItem("value", input.value)
  text.style.height = "auto"
  text.style.height = Math.max(text.scrollHeight, window.innerHeight - 60)+"px"
  }
  )
}
function toggleSpellCheck() {
  const value = document.getElementById("text").getAttribute("spellcheck")
  document.getElementById("text").setAttribute("spellcheck", value == "false" ? "true" : "false")
}
const inputElement = document.getElementById("file")
inputElement.addEventListener("change", handleFiles, false)
function handleFiles() {
  // const fileList = this.files
  const file = document.getElementById("file").files[0]
  if (file) {
    var reader = new FileReader()
    reader.readAsText(file, "UTF-8")
    reader.onload = function (evt) {
      document.querySelector("textarea").value = evt.target.result
    }
    reader.onerror = function (evt) {
      document.querySelector("textarea").value = "error reading file"
    }
  }
}
function copyToClipboard() {
  var copyText = document.getElementById("text")
  copyText.select()
  copyText.setSelectionRange(0, 99999)
  document.execCommand("copy")
}
</script>
   </body>
</html>